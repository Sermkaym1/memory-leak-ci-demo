# üîç Memory Leak CI Demo Project

**–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è CI/CD —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏** —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –∏ –≤–µ–±-–¥–∞—à–±–æ—Ä–¥–æ–º.

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
- ‚úÖ **–î–≤–∞ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** —Å —É—Ç–µ—á–∫–∞–º–∏ –ø–∞–º—è—Ç–∏ –∏ –±–µ–∑ (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** —Å Pytest + Allure –æ—Ç—á–µ—Ç–∞–º–∏
- ‚úÖ **GitLab CI/CD + GitHub Actions** - –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- ‚úÖ **Live Dashboard** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** - Slack, Teams, Email –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —É—Ç–µ—á–µ–∫
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ø–∞–º—è—Ç—å, CPU, —Å–µ—Ç—å, —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã
- ‚úÖ **Prometheus + Grafana** –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** –Ω–∞ GitHub/GitLab Pages

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
bash scripts/install.sh
```

### üìã –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

<details>
<summary>–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ä—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–∫–ª–∏–∫–Ω–∏—Ç–µ —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å)</summary>

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER
# –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+
sudo apt update
sudo apt install -y python3 python3-pip python3-venv

# 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Java (–¥–ª—è Allure)
sudo apt install -y openjdk-11-jdk

# 5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Allure
wget https://github.com/allure-framework/allure2/releases/download/2.24.1/allure-2.24.1.tgz
sudo tar -zxvf allure-2.24.1.tgz -C /opt/
sudo ln -s /opt/allure-2.24.1/bin/allure /usr/bin/allure
```

</details>

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
git clone https://github.com/Sermkaym1/memory-leak-ci-demo.git
cd memory-leak-ci-demo
```

### üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–ø—É—Å–∫–∞

#### **‚ö° –ë—ã—Å—Ç—Ä–æ–µ –¥–µ–º–æ (5 –º–∏–Ω—É—Ç):**
```bash
make quick-demo
```

#### **üî• –ü–æ–ª–Ω–æ–µ –¥–µ–º–æ (15-20 –º–∏–Ω—É—Ç):**
```bash
make full-demo
```

#### **üìã –ü–æ—à–∞–≥–æ–≤—ã–π –∑–∞–ø—É—Å–∫:**
```bash
# 1. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
make build && make up

# 2. –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (5 –º–∏–Ω) —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å—é
make test-quick

# 3. –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã (10-15 –º–∏–Ω)
make test

# 4. –û—Ç–∫—Ä—ã—Ç—å Allure –æ—Ç—á–µ—Ç
make report

# 5. Live Dashboard (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
python dashboard/live_dashboard.py
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5555
```

### üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

–ü–æ—Å–ª–µ `make up`:
- **üî¥ App WITH leak**: http://localhost:5000/health
- **üü¢ App WITHOUT leak**: http://localhost:5001/health  
- **üìä Prometheus**: http://localhost:9090
- **üìà Grafana**: http://localhost:3000 (admin/admin)
- **üì± Live Dashboard**: http://localhost:5555 (–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
memory-leak-ci-demo/
‚îú‚îÄ‚îÄ apps/                           # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ app_with_leak/             # –° —É—Ç–µ—á–∫–∞–º–∏ –ø–∞–º—è—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ app_without_leak/          # –ë–µ–∑ —É—Ç–µ—á–µ–∫
‚îú‚îÄ‚îÄ tests/                         # –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_memory_leak.py       # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã (10-15 –º–∏–Ω)
‚îÇ   ‚îî‚îÄ‚îÄ utils/                    # –£—Ç–∏–ª–∏—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ monitoring/                    # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ   ‚îú‚îÄ‚îÄ prometheus.yml
‚îÇ   ‚îî‚îÄ‚îÄ grafana/                  # –î–∞—à–±–æ—Ä–¥—ã
‚îú‚îÄ‚îÄ ci/                           # CI/CD
‚îÇ   ‚îú‚îÄ‚îÄ teamcity/                 # TeamCity –∫–æ–Ω—Ñ–∏–≥
‚îÇ   ‚îî‚îÄ‚îÄ scripts/                  # –°–∫—Ä–∏–ø—Ç—ã
‚îî‚îÄ‚îÄ docs/                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üß™ –¢–∏–ø—ã —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ (—Å –ø—Ä–∏–º–µ—Ä–∞–º–∏)

### 1. –ù–µ–∑–∞–∫—Ä—ã—Ç—ã–µ DB —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```python
# ‚ùå –ü–ª–æ—Ö–æ - —É—Ç–µ—á–∫–∞
conn = psycopg2.connect(...)
# —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

# ‚úÖ –•–æ—Ä–æ—à–æ
with conn_pool.getconn() as conn:
    # –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    pass
# –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø—É–ª
```

### 2. –ö–µ—à –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
```python
# ‚ùå –ü–ª–æ—Ö–æ - —É—Ç–µ—á–∫–∞
cache = {}
cache[key] = data  # —Ä–∞—Å—Ç–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

# ‚úÖ –•–æ—Ä–æ—à–æ
from cachetools import TTLCache
cache = TTLCache(maxsize=100, ttl=300)
```

### 3. –§–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã
```python
# ‚ùå –ü–ª–æ—Ö–æ - —É—Ç–µ—á–∫–∞
f = open('file.txt', 'w')
f.write(data)
# f.close() - –∑–∞–±—ã–ª–∏!

# ‚úÖ –•–æ—Ä–æ—à–æ
with open('file.txt', 'w') as f:
    f.write(data)
# –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä–æ–µ—Ç—Å—è
```

## üìà –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–µ—Å—Ç—ã

```python
# tests/test_memory_leak.py

@pytest.mark.allure.severity('critical')
@pytest.mark.parametrize('duration', [600, 900])  # 10 –∏ 15 –º–∏–Ω—É—Ç
def test_detect_memory_leak(app_container, duration):
    """
    1. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É (HTTP –∑–∞–ø—Ä–æ—Å—ã)
    3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –ø–∞–º—è—Ç—å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    4. –°—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –≤ Allure
    5. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ—Å—Ç—å –ª–∏ —É—Ç–µ—á–∫–∞
    """
    pass
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—Ç–µ—á–∫–∏:

- **–†–æ—Å—Ç –ø–∞–º—è—Ç–∏** > 50 MB –∑–∞ —Ç–µ—Å—Ç
- **–¢—Ä–µ–Ω–¥**: –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞—Å—Ç—É—â–∏–π (–Ω–µ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è)
- **–°–∫–æ—Ä–æ—Å—Ç—å —Ä–æ—Å—Ç–∞** > 5 MB/–º–∏–Ω

## üöÄ CI/CD –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### ü¶ä **GitLab CI/CD**

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—ã–π `.gitlab-ci.yml` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏:

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ **–ü—Ä–∏ push/MR** ‚Üí –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (5 –º–∏–Ω)
- ‚úÖ **–ü—Ä–∏ push –≤ main** ‚Üí –ø–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã (15 –º–∏–Ω)
- ‚úÖ **–ö–∞–∂–¥—É—é –Ω–æ—á—å** ‚Üí –ø–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** –Ω–∞ GitLab Pages
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –≤ Slack/Teams/Email –ø—Ä–∏ —É—Ç–µ—á–∫–∞—Ö

```bash
# 1. –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã –≤ GitLab —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git add .gitlab-ci.yml
git commit -m "Add GitLab CI/CD pipeline"
git push

# 2. –í GitLab –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
#    Settings > CI/CD > Variables:
#    SLACK_WEBHOOK_URL = https://hooks.slack.com/...
#    EMAIL_TO = team@company.com

# 3. –í–∫–ª—é—á–∏—Ç–µ GitLab Pages:
#    Settings > Pages > Enable

# 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:
#    CI/CD > Schedules > New schedule (–∫–∞–∂–¥—É—é –Ω–æ—á—å)
```

### üêô **GitHub Actions**

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Actions:

```bash
# 1. –§–∞–π–ª —É–∂–µ –≥–æ—Ç–æ–≤: .github/workflows/memory-leak-ci.yml
# 2. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Settings > Secrets:
#    SLACK_WEBHOOK_URL
#    EMAIL_USERNAME, EMAIL_PASSWORD, EMAIL_TO

# 3. Push –∑–∞–ø—É—Å—Ç–∏—Ç workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
git push
```

### üß™ **–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å CI/CD**

üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** [HOW_TO_TEST_CICD.md](HOW_TO_TEST_CICD.md)

**–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (30 —Å–µ–∫—É–Ω–¥):**

```bash
# 1. –°–¥–µ–ª–∞–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
echo "<!-- CI/CD test: $(date) -->" >> README.MD

# 2. Commit –∏ push
git add README.MD
git commit -m "test: –ø—Ä–æ–≤–µ—Ä–∫–∞ CI/CD pipeline"
git push

# 3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:
# GitLab: CI/CD > Pipelines
# GitHub: Actions tab

# 4. –û—Ç—á–µ—Ç—ã –±—É–¥—É—Ç –Ω–∞:
# GitLab Pages: https://yourname.gitlab.io/memory-leak-ci-demo
# GitHub Pages: https://yourname.github.io/memory-leak-ci-demo
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚ö° –ó–∞–ø—É—Å—Ç—è—Ç—Å—è –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (5 –º–∏–Ω)
- üìä –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è Allure –æ—Ç—á–µ—Ç —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- üìß –ü—Ä–∏–¥—É—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack/Teams/Email (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
- üöÄ –û—Ç—á–µ—Ç –æ–ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –Ω–∞ Pages

### üìä **–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Ç—á–µ—Ç—ã CI/CD:**
- üî¥ **FAILED —Ç–µ—Å—Ç—ã** ‚Üí –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
- üü¢ **PASSED —Ç–µ—Å—Ç—ã** ‚Üí —É—Ç–µ—á–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- üìà **Graf–∏–∫–∏ —Ä–æ—Å—Ç–∞ –ø–∞–º—è—Ç–∏** –≤ Allure –æ—Ç—á–µ—Ç–∞—Ö
- üìß **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –≤ Slack/Teams/Email

## üéØ Makefile –∫–æ–º–∞–Ω–¥—ã

```bash
make help          # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
make quick-demo    # –ë—ã—Å—Ç—Ä–æ–µ –¥–µ–º–æ (5 –º–∏–Ω)
make full-demo     # –ü–æ–ª–Ω–æ–µ –¥–µ–º–æ (15-20 –º–∏–Ω)
make build         # –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã
make up            # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make down          # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make test-quick    # –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (5 –º–∏–Ω) —Å –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å—é
make test          # –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã (10-15 –º–∏–Ω)
make report        # –û—Ç–∫—Ä—ã—Ç—å Allure –æ—Ç—á–µ—Ç
make clean         # –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
make logs          # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
```

## ÔøΩ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üì± **Live Dashboard**
–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ—Å—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```bash
# –ó–∞–ø—É—Å–∫ –¥–∞—à–±–æ—Ä–¥–∞
python dashboard/live_dashboard.py

# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5555
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìä –ì—Ä–∞—Ñ–∏–∫–∏ –ø–∞–º—è—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚ö° –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- üìà –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- üìã –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- üîÑ WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

### üìß **–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —É—Ç–µ—á–µ–∫:

```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
export SLACK_WEBHOOK_URL="https://hooks.slack.com/services/..."
export TEAMS_WEBHOOK_URL="https://outlook.office.com/webhook/..."
export EMAIL_TO="team@company.com"

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
```

### üìä **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —É—Ç–µ—á–µ–∫:

```python
from tests.utils.enhanced_monitor import EnhancedMemoryMonitor
from tests.utils.notifications import NotificationManager

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏: –ø–∞–º—è—Ç—å + CPU + —Å–µ—Ç—å + —Ñ–∞–π–ª—ã
monitor = EnhancedMemoryMonitor(container)
metrics = monitor.get_detailed_metrics()

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¢–ò–ü–û–í —É—Ç–µ—á–µ–∫
leak_analysis = monitor.detect_memory_leak_patterns()
# –†–µ–∑—É–ª—å—Ç–∞—Ç: {"leak_types": ["memory_leak", "connection_leak"], "severity": "high"}

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–æ –≤—Å–µ –∫–∞–Ω–∞–ª—ã
notifier = NotificationManager()
notifier.send_all_notifications(test_results)
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üìñ **–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [WHY_POSTGRES_REDIS.md](docs/WHY_POSTGRES_REDIS.md) - **–ó–ê–ß–ï–ú –Ω—É–∂–Ω—ã PostgreSQL –∏ Redis** ü§î
- [ALL_IMPROVEMENTS.md](ALL_IMPROVEMENTS.md) - **–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π** üöÄ
- [IMPROVEMENTS.md](IMPROVEMENTS.md) - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π
- [MEMORY_LEAK_PATTERNS.md](docs/MEMORY_LEAK_PATTERNS.md) - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —É—Ç–µ—á–µ–∫

### üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- [.gitlab-ci.yml](.gitlab-ci.yml) - GitLab CI/CD pipeline
- [.github/workflows/memory-leak-ci.yml](.github/workflows/memory-leak-ci.yml) - GitHub Actions
- [dashboard/live_dashboard.py](dashboard/live_dashboard.py) - Live –≤–µ–±-–¥–∞—à–±–æ—Ä–¥
- [tests/utils/enhanced_monitor.py](tests/utils/enhanced_monitor.py) - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [tests/utils/notifications.py](tests/utils/notifications.py) - –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üß™ **–î–µ–º–æ –±–µ–∑ Docker:**
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π –±–µ–∑ Docker
python test_improvements.py
```

## üéØ **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### ÔøΩ **1. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Ç–µ—á–∫–∏ DB —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–π–¥–µ—Ç –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ PostgreSQL
make test-quick

# –†–µ–∑—É–ª—å—Ç–∞—Ç: 
# üî¥ –£–¢–ï–ß–ö–ê –û–ë–ù–ê–†–£–ñ–ï–ù–ê: connection_leak
# üìä –†–æ—Å—Ç –ø–∞–º—è—Ç–∏: +87.3 MB
# üìà TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: 5 ‚Üí 23 (+18)
```

### üîç **2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
```bash
# –ó–∞–ø—É—Å–∫ live dashboard
python dashboard/live_dashboard.py

# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5555
# –£–≤–∏–¥–∏—Ç–µ: –≥—Ä–∞—Ñ–∏–∫–∏ –ø–∞–º—è—Ç–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ—Å—Ç–æ–≤, –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

### üîç **3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
```bash
# –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ–π —É—Ç–µ—á–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–¥—É—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
# üìß Email —Å HTML –æ—Ç—á–µ—Ç–æ–º –∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
# üí¨ Slack —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π "–û—Ç–∫—Ä—ã—Ç—å –æ—Ç—á–µ—Ç"
# üì± Teams —Å adaptive card
```

### üîç **4. –ê–Ω–∞–ª–∏–∑ —Ç–∏–ø–æ–≤ —É—Ç–µ—á–µ–∫**
```python
# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ß–¢–û –∏–º–µ–Ω–Ω–æ —Ç–µ—á–µ—Ç:
{
  "leak_types": ["memory_leak", "connection_leak", "file_descriptor_leak"],
  "severity": "critical",
  "memory_growth_mb": 127.5,
  "connection_growth": 18,
  "files_growth": 12
}
```

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "—É–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ health endpoints
curl http://localhost:5000/health
curl http://localhost:5001/health

# –ï—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç - —É–≤–µ–ª–∏—á—å—Ç–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤ conftest.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: "CI/CD –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è"
```bash
# GitLab: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Pipelines –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
# GitHub: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Actions tab

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å YAML:
yamllint .gitlab-ci.yml
yamllint .github/workflows/memory-leak-ci.yml
```

### –ü—Ä–æ–±–ª–µ–º–∞: "—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
echo $SLACK_WEBHOOK_URL
echo $EMAIL_TO

# –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ:
python -c "
from tests.utils.notifications import NotificationManager
notifier = NotificationManager()
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ
"
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Live Dashboard –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Flask —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω:
netstat -tlnp | grep 5555

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall:
sudo ufw allow 5555

# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:5555
```

